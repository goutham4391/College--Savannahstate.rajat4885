function displaySocialStreamData(t, e, a, i) { "use strict"; if (facebookNext = "", instagramNext = "", twitterNext = "", "success" === e && t.length >= 0) { var s, o, n, r, c, l, d, f, h, m, p = t, g = $.parseXML(p), u = $(g); u.find("NextUrl").each(function (t) { "facebook" == $(this).find("urlType").text() && (facebookNext = 0 === facebookNext.length ? $(this).find("url").text() : facebookNext + "~" + $(this).find("url").text()), "instagram" == $(this).find("urlType").text() && (instagramNext = 0 === instagramNext.length ? $(this).find("url").text() : instagramNext + "~" + $(this).find("url").text()), "twitter" == $(this).find("urlType").text() && (twitterNext = 0 === twitterNext.length ? $(this).find("url").text() : twitterNext + "~" + $(this).find("url").text()) }); var v = previousDay.getDate(), b = previousDay.getMonth() + 1, y = previousDay.getFullYear(), x = b + "/" + v + "/" + y; v = firstDay.getDate(), b = firstDay.getMonth() + 1, y = firstDay.getFullYear(); var w = b + "/" + v + "/" + y, D = $("<div class='dateLabel'>" + w + " - " + x + "</div>"); blnFormat && $container.isotope("insert", D), u.find("Post").each(function (t) { n = $(this).find("type").text(), o = $(this).find("postDate").text(), c = $(this).find("url").text(), r = $(this).find("content").text(), l = $(this).find("image").text(), d = $(this).find("video").text(), m = $(this).find("accountName").text(), f = getTitleLink(n, m), checkHandle(n, m), h = getSocialLink(n), "string" == typeof o && (s = timeConversion(o)), "string" != typeof n && (n = ""), 1 == i && (d.length > 0 ? r = d.indexOf("youtube") > -1 ? "<div class='videoContainer youtubeVideoContainer' style='cursor:pointer;' id=\"" + d + "\"><img src='" + l + "' /><br/><span class='playVideo'>Play Video</span></div><p>" + r + "</p>" : "<div class='videoContainer' style='cursor:pointer;' id=\"" + d + "\"><img src='" + l + "' /><br/><span class='playVideo'>Play Video</span></div><p>" + r + "</p>" : l.length > 0 && (r = "<img src='" + l + "' /><p>" + r + "</p>")); var e = $("<div class='item " + n + "_" + m.replace(/ /g, "_").replace(/\./g, "_") + "'><div class='postlogo logo-" + n + "'>" + f + "</div><div class='item-content-wrapper'><span class='posttime'>" + s + "</span><p>" + r + "</p><a class='btn-standard' target='_blank rel='noopener' href='" + c + "'>Original " + h + "</a></div></div>"); blnFormat ? $container.isotope("insert", e) : e.appendTo("#" + a) }), blnFormat && ($container.imagesLoaded(function () { $container.isotope("layout") }), toggleDisabledAccounts(), $("#more-posts-btn").show()), $("#socialPreloader").hide() } } function getTitleLink(t, e) { switch (t) { case "facebook": return "<a href='https://www.facebook.com/" + e + "' target='_blank rel='noopener' >" + e + "</a>"; case "instagram": return "<a href='https://instagram.com/" + e + "/' target='_blank rel='noopener' >" + e + "</a>"; case "twitter": return "<a href='https://twitter.com/" + e + "' target='_blank rel='noopener' >@" + e + "</a>" } } function getImage(t) { switch (t) { case "facebook": return "../images/FB-f-Logo-white.png"; case "instagram": return "../images/instagram-logo.png"; case "twitter": return "../images/Twitter_logo_white.png" } } function getSocialLink(t) { switch (t) { case "facebook": return "Post"; case "instagram": return "Post"; case "twitter": return "Tweet" } } function checkHandle(t, e) { -1 == $.inArray(t + "_" + e, handleArray) && (handleArray.push(t + "_" + e), newFilter = "<div class='filter " + t + "'><img src='" + getImage(t) + "'/>" + e + "<div class='remove-btn'></div></div>", $(newFilter).appendTo(".filters")) } function getSocialStreamData(t, e, a, i, s, o, n, r) { "use strict"; blnFormat = a, socialElement = n, blnFormat === !0 && ($("#more-posts-btn").hide(), $(function () { $container = $("#" + n).isotope({ masonry: { columnWidth: isotopeColumnWidth } }) })); var c = domainName + "SocialMediaStreamService.asmx/GetAllSocialPosts?numberOfPosts=" + t + "&mediaType=" + e + "&facebookParams=" + encodeURIComponent(i) + "&twitterParams=" + encodeURIComponent(o) + "&instagramParams=" + encodeURIComponent(s), l = createCORSRequest("GET", c); l && (l.onload = function () { displaySocialStreamData(l.responseText, "success", n, r) }, l.onerror = function () { streamError(n) }, l.send()) } function toggleDisabledAccounts() { $(".filters .filter").each(function () { var t = "", e = $(this).text(); e = e.replace(/ /g, "_"), e = e.replace(/\./g, "_"), $(this).hasClass("facebook") && (t = "facebook"), $(this).hasClass("instagram") && (t = "instagram"), $(this).hasClass("twitter") && (t = "twitter"), $(this).hasClass("filter-off") && $("." + t + "_" + e).css("display", "none") }), $container.imagesLoaded(function () { $container.isotope("layout") }) } var $container, blnFormat = !0, isotopeColumnWidth = 320, facebookNext = "", twitterNext = "", instagramNext = "", firstDay = new Date, previousDay = new Date, handleArray = new Array, socialElement = ""; previousDay.setDate(firstDay.getDate() - 2), $(document).ready(function () { "use strict"; $(".social-stream-container").width() < 960, $("#more-posts-btn").click(function () { previousDay.setDate(previousDay.getDate() - 2), firstDay.setDate(firstDay.getDate() - 2), $("#more-posts-btn").hide(), $("#socialPreloader").show(), getSocialStreamData(0, "all", !0, facebookNext, instagramNext, twitterNext, socialElement, !0) }), $("#container").on("click", ".videoContainer", function () { $(this).find("> img").remove(), $(this).find("> span").remove(); var t = $(this).attr("id"); t.indexOf("youtube") > -1 ? $("<iframe type='text/html' width='" + (isotopeColumnWidth - 20) + "' src='" + t + "' frameborder='0'>").appendTo(this) : $("<video width='100%' autoplay controls><source src='" + t + "' type='video/mp4'>Your browser does not support the video tag.</video>").appendTo(this) }), $(".filters").on("click", ".filter", function () { var t = "", e = $(this).text(); e = e.replace(/ /g, "_"), e = e.replace(/\./g, "_"), $(this).hasClass("facebook") && (t = "facebook"), $(this).hasClass("instagram") && (t = "instagram"), $(this).hasClass("twitter") && (t = "twitter"), $(this).hasClass("filter-off") ? ($(this).removeClass("filter-off"), $(this).find("div").addClass("remove-btn"), $(this).find("div").removeClass("add-btn"), $("." + t + "_" + e).css("display", "block")) : ($(this).addClass("filter-off"), $(this).find("div").removeClass("remove-btn"), $(this).find("div").addClass("add-btn"), $("." + t + "_" + e).css("display", "none")), $container.imagesLoaded(function () { $container.isotope("layout") }) }) });