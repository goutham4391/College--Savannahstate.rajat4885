function resortTileEvents(t) { function e(t, e) { return $(e).data("sort") == $(t).data("sort") ? output = -1 : $(e).data("sort") < $(t).data("sort") ? output = 1 : output = -1, output } $("#" + t + ">li").sort(e).appendTo("#" + t) } function isSameDay(t, e) { "use strict"; var n, a, s = !1; return "" === t && "" === e || (n = t.substring(0, 10), a = e.substring(0, 10), a == n && (s = !0)), s } function getMonthName(t) { var e = ["", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; return 12 >= t && t > 0 ? e[t] : "" } function getDayName(t) { var e = new Array(7); e[0] = "Sun", e[1] = "Mon", e[2] = "Tue", e[3] = "Wed", e[4] = "Thu", e[5] = "Fri", e[6] = "Sat"; var n = e[t]; return n } function daysInMonth(t, e) { var n = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]; return 2 != t ? n[t - 1] : e % 4 != 0 ? n[1] : e % 100 == 0 && e % 400 != 0 ? n[1] : n[1] + 1 } function displayEventsData(t, e, n, a, s) { "use strict"; if ("success" === e) { if (t.length >= 0) { var i, r, o, d, c, l, u, h, g, f, m, v, p, b, x, y, D, C, N, E, S, T, L = t, R = $.parseXML(L), U = $(R), M = 0; $("#" + n).html(""); if (U.find("CalEvent").each(function () { M++, i = $(this).find("CalendarId").text(), d = $(this).find("Title").text(), r = $(this).find("CategoryId").text(), o = $(this).find("CategoryName").text(), c = timeConversion($(this).find("StartDate").text()), l = timeConversion($(this).find("EndDate").text()), u = $(this).find("StartTime").text(), h = $(this).find("EndTime").text(), g = $(this).find("Description").text(), f = $(this).find("ContactName").text(), m = $(this).find("ContactDetails").text(), v = $(this).find("EventType").text(), p = $(this).find("Status").text(), D = $(this).find("Location").text(), C = $(this).find("Price").text(), N = $(this).find("ContactEmail").text(), E = $(this).find("Longitude").text(), S = $(this).find("Latitude").text(), T = $(this).find("URLTitle").text(), b = websiteURL + "events/event.shtml?id=" + i, b = websiteURL + "event/" + Number(c.substring(0, 2)) + "-" + c.substring(3, 5) + "-" + c.substring(6, 10) + "/" + T, y = $(this).find("TagName").text(); var t, e, a, L, R, U, w = new Date; w.getMonth() + 1 + "/" + w.getDate() + "/" + w.getFullYear(); if (isSameDay(c, l)) x = c, t = Number(c.substring(0, 2)), e = c.substring(3, 5), a = c.substring(6, 10), L = "", R = "", U = ""; else { if (x = c + " - " + l, t = Number(c.substring(0, 2)), e = c.substring(3, 5), a = c.substring(6, 10), s) { var I = getUrlVars().timeFrame; "undefined" == typeof I ? (w.getMonth() + 1).toString() + w.getDate().toString() + w.getFullYear().toString() < t + e + a ? (t = Number(c.substring(0, 2)), e = c.substring(3, 5), a = c.substring(6, 10)) : (t = w.getMonth() + 1, e = w.getDate(), a = w.getFullYear()) : (t = Number(c.substring(0, 2)), e = c.substring(3, 5), a = c.substring(6, 10)) } L = Number(l.substring(0, 2)), R = l.substring(3, 5), U = l.substring(6, 10) } "" != u && (x += "<br/>" + u, "" != h && (x += " - " + h)); var F = new Date; F.setFullYear(a), F.setMonth(t - 1), F.setDate(e); var O, P = "<li data-sort='" + t + e + a + "'><span class='eventDetails'><a href='" + b + "'>" + d + "</a>"; P += "<a class='btn-standard eventCategory' href='" + websiteURL + "events/search.shtml?category=" + encodeURIComponent(o).replace(/'/g, "%27") + "'>" + o + "</a> <a class='btn-standard eventCategory' href='" + websiteURL + "events/search.shtml?tag=" + encodeURIComponent(y).replace(/'/g, "%27") + "'>" + y + "</a></span>", P += "<span class='eventDate'><span class='eventMonth'>" + t + "</span><span class='eventDayName'>" + getDayName(F.getDay()) + "</span><span class='eventMonthName'>" + getMonthName(t) + "</span><span class='eventSeparator'>/</span><span class='eventDay'>" + Number(e) + "</span><span class='eventSeparator'>/</span><span class='eventYear'>" + a + "</span></span>", "" != L && (P += "<span class='eventEndDate'>&nbsp;-&nbsp;" + L + "/" + R + "/" + U + "</span>"), "" != u && (P += "<span class='eventStartTime'>" + u + "&nbsp;-&nbsp;</span>"), "" != h && (P += "<span class='eventEndTime'>" + h + "</span>"), "" == g && "" == f && "" == m || (P += "<span class='eventAdditionalInfo'>", "" != g && (P += "<span class='eventDescription'>" + g + "</span>"), "" != f && (P += "<span class='eventContactName'>Contact Name: " + f + "</span>"), "" != m && (P += "<span class='eventContactDetails'>Contact Details: " + m + "</span>"), P += "</span></li>"), O = $(P), O.appendTo("#" + n) }), 0 == M) { $("#" + n).html(""); var w = $("<li>No events found for this category.</li>"); w.appendTo("#" + n) } $("#eventsPreloader").hide() } else { $("#" + n).html(""); var w = $("<li>No events found for this category.</li>"); w.appendTo("#" + n) } a && resortTileEvents(n) } } function displayEvent(t, e) { "use strict"; if ("success" === e && t.length >= 0) { var n, a, s, i, r, o, d, c, l, u, h, g, f, m, v, p, b, x, y, D, C = t, N = $.parseXML(C), E = $(N); if (E.find("CalEvent").each(function () { n = $(this).find("CalendarId").text(), i = $(this).find("Title").text(), a = $(this).find("CategoryId").text(), s = $(this).find("CategoryName").text(), r = timeConversion($(this).find("StartDate").text()), o = timeConversion($(this).find("EndDate").text()), d = $(this).find("StartTime").text(), c = $(this).find("EndTime").text(), l = $(this).find("Description").text(), u = $(this).find("ContactName").text(), h = $(this).find("ContactDetails").text(), g = $(this).find("EventType").text(), f = $(this).find("Status").text(), p = $(this).find("Location").text(), b = $(this).find("Price").text(), x = $(this).find("ContactEmail").text(), v = $(this).find("TagName").text(), y = $(this).find("Longitude").text(), D = $(this).find("Latitude").text(); var t = Number(r.substring(0, 2)), e = Number(r.substring(3, 5)), C = r.substring(6, 10); m = t + "/" + e + "/" + C, isSameDay(r, o) || (t = Number(o.substring(0, 2)), e = Number(o.substring(3, 5)), C = o.substring(6, 10), m += " - " + t + "/" + e + "/" + C), $("<a class='btn-standard' href='" + websiteURL + "events/search.shtml?category=" + encodeURIComponent(s) + "'>" + s + "</a>").appendTo("#tags"), $("<a class='btn-standard' href='" + websiteURL + "events/search.shtml?tag=" + encodeURIComponent(v) + "'>" + v + "</a>").appendTo("#tags"), $(".title").html(i), $("#eventDate").html(m), (d.length > 0 || c.length > 0) && $("#eventTime").html(d + " - " + c), l.length > 0 && $("#eventDescription").html(l + "<h3>Location</h3><strong>" + p + "<strong>"), u.length > 0 && h.length > 0 ? (u.length > 0 && $("#eventContact").html(u), h.length > 0 && (x.length > 0 ? $("#eventContactDetails").html(h + '<br/><a href="mailto:' + x + '">' + x + "</a>") : h.indexOf("@") >= 0 ? $("#eventContactDetails").html('<a href="mailto:' + h + '">' + h + "</a>") : $("#eventContactDetails").html(h))) : $("#eventContact").html("No contact information provided.") }), D.length > 0 && y.length > 0) $("#map-canvas").show(), initialize(Number(y), Number(D), p, 19); else if (p.length > 0) try { "SSU Campus" == p ? ($("#map-canvas").show(), initialize(32.02427557380672, -81.06062892254353, "Savannah State University", 16)) : getPlaceByName(p) } catch (S) { } $("#eventsPreloader").hide() } } function getEventData(t, e, n, a, s, i, r, o, d, c) { "use strict"; var l = domainName + "CalendarService.asmx/Search?keyword=" + t + "&category=" + e + "&tag=" + n + "&dateStart=" + a + "&dateEnd=" + s + "&numberOfEvents=" + i + "&allowDuplicates=" + o, u = createCORSRequest("GET", l); u && (u.onload = function () { displayEventsData(u.responseText, "success", r, d, c) }, u.onerror = function () { streamError(r) }, u.send()) } function getEventById() { "use strict"; var t = getUrlVars().id, e = domainName + "CalendarService.asmx/GetEventById?id=" + t, n = createCORSRequest("GET", e); n && (n.onload = function () { displayEvent(n.responseText, "success") }, n.onerror = function () { streamError() }, n.send()) } $(document).ready(function () { "use strict"; $("#btnEventSearch").click(function () { var t = $("#txtEventSearch").val(); getEventData(t, "", "", formattedQueryToday, formattedQueryFuture, 0, "upcomingEvents", !0) }) });